<div class="overlay-backdrop" (click)="closeModal()"></div>
<div class="modal-wrapper">
  <form [formGroup]="lessonForm" *ngIf="lesson">
    <app-menu-select placeholder="Theme"
                     maxLength="40"
                     [loadPage]="loadThemes"
                     [loadItem]="loadTheme"
                     [selectControl]="lessonForm.get('theme')"></app-menu-select>
    <app-menu-select placeholder="Housing"
                     maxLength="40"
                     [loadPage]="loadHousings"
                     [loadItem]="loadHousing"
                     [selectControl]="lessonForm.get('housing')"
                     (changeSelected)="roomsSelect.needRefresh = true"></app-menu-select>
    <app-menu-select #roomsSelect
                     placeholder="Room"
                     maxLength="40"
                     sortByField="num"
                     [disabled]="!lessonForm.get('housing')"
                     [loadPage]="loadRooms"
                     [loadItem]="loadRoom"
                     [itemToSting]="roomToSting"
                     [selectControl]="lessonForm.get('room')"></app-menu-select>
    <app-menu-select #roomsSelect
                     placeholder="Teacher"
                     maxLength="40"
                     withSearch="true"
                     multiple="true"
                     [loadPage]="loadTeachers"
                     [loadItem]="loadTeacher"
                     [selectControl]="lessonForm.get('teachers')"></app-menu-select>
    <app-select [abstractControl]="lessonForm.get('format')">
      <app-select-result>{{lessonsMap.get(lessonForm.value.format) || 'Format'}}</app-select-result>
      <app-option-item *ngFor="let option of lessonFormats" [value]="option.id">{{option.name}}</app-option-item>
    </app-select>
    <app-select [abstractControl]="lessonForm.get('subgroup')">
      <app-select-result>{{lessonForm.value.subgroup || 'Всі'}}</app-select-result>
      <app-option-item *ngFor="let option of subgroups" [value]="option">{{option}}</app-option-item>
    </app-select>
  </form>
  <div *ngIf="vacantWeeks">vacant weeks: {{vacantWeeks}}</div>
</div>

